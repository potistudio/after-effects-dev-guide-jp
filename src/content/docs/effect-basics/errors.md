---
title: 'エラー'
---
常に、常に、*常に* (常に!) `main()` から `PF_Err` を返します。プラグインはすべてのエラーを After Effects に返す必要があります。

コールバックや PICA スイートで受け取ったエラーも、そこで処理しない限り必ず After Effects に返してください。

正しいエラー コードを返すこと、および割り当てたメモリを破棄することに注意してください。

本当に。私たちは真剣です。

---

## エラーコード

| エラー | 意味 |
| --- | --- |
| `PF_Err_NONE` | 成功です。 |
| `PF_Err_OUT_OF_MEMORY` | メモリ確保に失敗しました。RAM プレビュー中はこのエラーが発生し得る前提でホストが動作します。 |
| `PF_Err_INTERNAL_STRUCT_DAMAGED` | データ構造の破損または不整合です。 |
| `PF_Err_INVALID_INDEX` | 配列インデックス不正です。 |
| `PF_Err_UNRECOGNIZED_PARAM_TYPE` | 未対応または不正なパラメータ型です。 |
| `PF_Err_INVALID_CALLBACK` | コールバックポインタが不正です。 |
| `PF_Err_BAD_CALLBACK_PARAM` | コールバックへ渡した引数が不正です。 |
| `PF_Interrupt_CANCEL` | ユーザー操作などでレンダリングが中断された状態です。受け取ったら処理を止めてそのままホストへ返してください。返さないと誤ったフレームがキャッシュされる可能性があります。 |
| `PF_Err_CANNOT_PARSE_KEYFRAME_TEXT` | `PF_Arbitrary_SCAN_FUNC` でクリップボードのキーフレーム文字列解析に失敗した場合に返します。 |

---

## エラー報告ポリシー

After Effects には、エラー処理に関する一貫したポリシーがあります。それに従ってください。

プラグインのコードでエラーが発生した場合は、プラグインから After Effects に戻る前に、すぐにユーザーに報告してください。

After Effects では、プラグインの実行中に発生したオペレーティング システムからのエラーは、ユーザー側のものであると見なされます。

コールバック関数から返ってきたエラーは、そのまま After Effects に返してください。

After Effects では、RAM プレビュー中や `-noui` 実行時にエラー報告が抑制される場合があります。

プラグイン側で明示的にエラー表示したい場合は、`PF_OutFlag_DISPLAY_ERROR_MESSAGE` を設定し、[PF_OutData の `return_msg`](pf_outdata#pf_outdata) に文言を入れます。

そうすることで、エラーがレンダリング ログに記録され、レンダリング エンジンまたはスクリプトによるレンダリングでシステムがハングするのを防ぐことができます。

---

## 次のステップ

ここまででエフェクトプラグインの基本的なエラー処理方針は押さえられました。  
次は [Effect Details](../effect-details/effect-details) で、関数スイートの使い方や実装最適化の詳細を確認してください。
